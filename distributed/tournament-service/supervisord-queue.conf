; Supervisor configuration for Tournament Service Queue Workers
;
; Installation:
; 1. Copy this file to /etc/supervisor/conf.d/tournament-service-queue.conf
; 2. Run: sudo supervisorctl reread
; 3. Run: sudo supervisorctl update
; 4. Run: sudo supervisorctl start tournament-service-queue:*
;
; Management:
; - Start: sudo supervisorctl start tournament-service-queue:*
; - Stop: sudo supervisorctl stop tournament-service-queue:*
; - Restart: sudo supervisorctl restart tournament-service-queue:*
; - Status: sudo supervisorctl status tournament-service-queue:*
; - Logs: tail -f /var/log/tournament-service-queue-*.log

[program:tournament-service-queue-high]
process_name=%(program_name)s_%(process_num)02d
command=php /home/yared/Documents/StudyMaterials/SOFTWARE_ARCHITECTURES/sports-tournament-architecture/distributed/tournament-service/artisan queue:work redis --queue=events-high --tries=3 --timeout=120 --sleep=3 --max-time=3600
directory=/home/yared/Documents/StudyMaterials/SOFTWARE_ARCHITECTURES/sports-tournament-architecture/distributed/tournament-service
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
user=yared
numprocs=2
redirect_stderr=true
stdout_logfile=/var/log/tournament-service-queue-high.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=5
stopwaitsecs=3600
environment=LARAVEL_ENV="production"

[program:tournament-service-queue-default]
process_name=%(program_name)s_%(process_num)02d
command=php /home/yared/Documents/StudyMaterials/SOFTWARE_ARCHITECTURES/sports-tournament-architecture/distributed/tournament-service/artisan queue:work redis --queue=events-default,default --tries=3 --timeout=120 --sleep=3 --max-time=3600
directory=/home/yared/Documents/StudyMaterials/SOFTWARE_ARCHITECTURES/sports-tournament-architecture/distributed/tournament-service
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
user=yared
numprocs=4
redirect_stderr=true
stdout_logfile=/var/log/tournament-service-queue-default.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=5
stopwaitsecs=3600
environment=LARAVEL_ENV="production"

[program:tournament-service-queue-low]
process_name=%(program_name)s_%(process_num)02d
command=php /home/yared/Documents/StudyMaterials/SOFTWARE_ARCHITECTURES/sports-tournament-architecture/distributed/tournament-service/artisan queue:work redis --queue=events-low,low --tries=3 --timeout=120 --sleep=3 --max-time=3600
directory=/home/yared/Documents/StudyMaterials/SOFTWARE_ARCHITECTURES/sports-tournament-architecture/distributed/tournament-service
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
user=yared
numprocs=1
redirect_stderr=true
stdout_logfile=/var/log/tournament-service-queue-low.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=5
stopwaitsecs=3600
environment=LARAVEL_ENV="production"

[group:tournament-service-queue]
programs=tournament-service-queue-high,tournament-service-queue-default,tournament-service-queue-low
priority=999
